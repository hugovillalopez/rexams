{
  "version": 3,
  "sources": ["../../prosemirror-dropcursor/dist/index.js", "../../prosemirror-gapcursor/dist/index.js", "../../@milkdown/plugin-cursor/src/index.ts"],
  "sourcesContent": ["import { Plugin } from 'prosemirror-state';\r\nimport { dropPoint } from 'prosemirror-transform';\r\n\r\n/**\r\nCreate a plugin that, when added to a ProseMirror instance,\r\ncauses a decoration to show up at the drop position when something\r\nis dragged over the editor.\r\n\r\nNodes may add a `disableDropCursor` property to their spec to\r\ncontrol the showing of a drop cursor inside them. This may be a\r\nboolean or a function, which will be called with a view and a\r\nposition, and should return a boolean.\r\n*/\r\nfunction dropCursor(options = {}) {\r\n    return new Plugin({\r\n        view(editorView) { return new DropCursorView(editorView, options); }\r\n    });\r\n}\r\nclass DropCursorView {\r\n    constructor(editorView, options) {\r\n        var _a;\r\n        this.editorView = editorView;\r\n        this.cursorPos = null;\r\n        this.element = null;\r\n        this.timeout = -1;\r\n        this.width = (_a = options.width) !== null && _a !== void 0 ? _a : 1;\r\n        this.color = options.color === false ? undefined : (options.color || \"black\");\r\n        this.class = options.class;\r\n        this.handlers = [\"dragover\", \"dragend\", \"drop\", \"dragleave\"].map(name => {\r\n            let handler = (e) => { this[name](e); };\r\n            editorView.dom.addEventListener(name, handler);\r\n            return { name, handler };\r\n        });\r\n    }\r\n    destroy() {\r\n        this.handlers.forEach(({ name, handler }) => this.editorView.dom.removeEventListener(name, handler));\r\n    }\r\n    update(editorView, prevState) {\r\n        if (this.cursorPos != null && prevState.doc != editorView.state.doc) {\r\n            if (this.cursorPos > editorView.state.doc.content.size)\r\n                this.setCursor(null);\r\n            else\r\n                this.updateOverlay();\r\n        }\r\n    }\r\n    setCursor(pos) {\r\n        if (pos == this.cursorPos)\r\n            return;\r\n        this.cursorPos = pos;\r\n        if (pos == null) {\r\n            this.element.parentNode.removeChild(this.element);\r\n            this.element = null;\r\n        }\r\n        else {\r\n            this.updateOverlay();\r\n        }\r\n    }\r\n    updateOverlay() {\r\n        let $pos = this.editorView.state.doc.resolve(this.cursorPos);\r\n        let isBlock = !$pos.parent.inlineContent, rect;\r\n        if (isBlock) {\r\n            let before = $pos.nodeBefore, after = $pos.nodeAfter;\r\n            if (before || after) {\r\n                let node = this.editorView.nodeDOM(this.cursorPos - (before ? before.nodeSize : 0));\r\n                if (node) {\r\n                    let nodeRect = node.getBoundingClientRect();\r\n                    let top = before ? nodeRect.bottom : nodeRect.top;\r\n                    if (before && after)\r\n                        top = (top + this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top) / 2;\r\n                    rect = { left: nodeRect.left, right: nodeRect.right, top: top - this.width / 2, bottom: top + this.width / 2 };\r\n                }\r\n            }\r\n        }\r\n        if (!rect) {\r\n            let coords = this.editorView.coordsAtPos(this.cursorPos);\r\n            rect = { left: coords.left - this.width / 2, right: coords.left + this.width / 2, top: coords.top, bottom: coords.bottom };\r\n        }\r\n        let parent = this.editorView.dom.offsetParent;\r\n        if (!this.element) {\r\n            this.element = parent.appendChild(document.createElement(\"div\"));\r\n            if (this.class)\r\n                this.element.className = this.class;\r\n            this.element.style.cssText = \"position: absolute; z-index: 50; pointer-events: none;\";\r\n            if (this.color) {\r\n                this.element.style.backgroundColor = this.color;\r\n            }\r\n        }\r\n        this.element.classList.toggle(\"prosemirror-dropcursor-block\", isBlock);\r\n        this.element.classList.toggle(\"prosemirror-dropcursor-inline\", !isBlock);\r\n        let parentLeft, parentTop;\r\n        if (!parent || parent == document.body && getComputedStyle(parent).position == \"static\") {\r\n            parentLeft = -pageXOffset;\r\n            parentTop = -pageYOffset;\r\n        }\r\n        else {\r\n            let rect = parent.getBoundingClientRect();\r\n            parentLeft = rect.left - parent.scrollLeft;\r\n            parentTop = rect.top - parent.scrollTop;\r\n        }\r\n        this.element.style.left = (rect.left - parentLeft) + \"px\";\r\n        this.element.style.top = (rect.top - parentTop) + \"px\";\r\n        this.element.style.width = (rect.right - rect.left) + \"px\";\r\n        this.element.style.height = (rect.bottom - rect.top) + \"px\";\r\n    }\r\n    scheduleRemoval(timeout) {\r\n        clearTimeout(this.timeout);\r\n        this.timeout = setTimeout(() => this.setCursor(null), timeout);\r\n    }\r\n    dragover(event) {\r\n        if (!this.editorView.editable)\r\n            return;\r\n        let pos = this.editorView.posAtCoords({ left: event.clientX, top: event.clientY });\r\n        let node = pos && pos.inside >= 0 && this.editorView.state.doc.nodeAt(pos.inside);\r\n        let disableDropCursor = node && node.type.spec.disableDropCursor;\r\n        let disabled = typeof disableDropCursor == \"function\" ? disableDropCursor(this.editorView, pos, event) : disableDropCursor;\r\n        if (pos && !disabled) {\r\n            let target = pos.pos;\r\n            if (this.editorView.dragging && this.editorView.dragging.slice) {\r\n                let point = dropPoint(this.editorView.state.doc, target, this.editorView.dragging.slice);\r\n                if (point != null)\r\n                    target = point;\r\n            }\r\n            this.setCursor(target);\r\n            this.scheduleRemoval(5000);\r\n        }\r\n    }\r\n    dragend() {\r\n        this.scheduleRemoval(20);\r\n    }\r\n    drop() {\r\n        this.scheduleRemoval(20);\r\n    }\r\n    dragleave(event) {\r\n        if (event.target == this.editorView.dom || !this.editorView.dom.contains(event.relatedTarget))\r\n            this.setCursor(null);\r\n    }\r\n}\r\n\r\nexport { dropCursor };\r\n", "import { keydownHandler } from 'prosemirror-keymap';\r\nimport { Selection, NodeSelection, TextSelection, Plugin } from 'prosemirror-state';\r\nimport { Slice, Fragment } from 'prosemirror-model';\r\nimport { DecorationSet, Decoration } from 'prosemirror-view';\r\n\r\n/**\r\nGap cursor selections are represented using this class. Its\r\n`$anchor` and `$head` properties both point at the cursor position.\r\n*/\r\nclass GapCursor extends Selection {\r\n    /**\r\n    Create a gap cursor.\r\n    */\r\n    constructor($pos) {\r\n        super($pos, $pos);\r\n    }\r\n    map(doc, mapping) {\r\n        let $pos = doc.resolve(mapping.map(this.head));\r\n        return GapCursor.valid($pos) ? new GapCursor($pos) : Selection.near($pos);\r\n    }\r\n    content() { return Slice.empty; }\r\n    eq(other) {\r\n        return other instanceof GapCursor && other.head == this.head;\r\n    }\r\n    toJSON() {\r\n        return { type: \"gapcursor\", pos: this.head };\r\n    }\r\n    /**\r\n    @internal\r\n    */\r\n    static fromJSON(doc, json) {\r\n        if (typeof json.pos != \"number\")\r\n            throw new RangeError(\"Invalid input for GapCursor.fromJSON\");\r\n        return new GapCursor(doc.resolve(json.pos));\r\n    }\r\n    /**\r\n    @internal\r\n    */\r\n    getBookmark() { return new GapBookmark(this.anchor); }\r\n    /**\r\n    @internal\r\n    */\r\n    static valid($pos) {\r\n        let parent = $pos.parent;\r\n        if (parent.isTextblock || !closedBefore($pos) || !closedAfter($pos))\r\n            return false;\r\n        let override = parent.type.spec.allowGapCursor;\r\n        if (override != null)\r\n            return override;\r\n        let deflt = parent.contentMatchAt($pos.index()).defaultType;\r\n        return deflt && deflt.isTextblock;\r\n    }\r\n    /**\r\n    @internal\r\n    */\r\n    static findGapCursorFrom($pos, dir, mustMove = false) {\r\n        search: for (;;) {\r\n            if (!mustMove && GapCursor.valid($pos))\r\n                return $pos;\r\n            let pos = $pos.pos, next = null;\r\n            // Scan up from this position\r\n            for (let d = $pos.depth;; d--) {\r\n                let parent = $pos.node(d);\r\n                if (dir > 0 ? $pos.indexAfter(d) < parent.childCount : $pos.index(d) > 0) {\r\n                    next = parent.child(dir > 0 ? $pos.indexAfter(d) : $pos.index(d) - 1);\r\n                    break;\r\n                }\r\n                else if (d == 0) {\r\n                    return null;\r\n                }\r\n                pos += dir;\r\n                let $cur = $pos.doc.resolve(pos);\r\n                if (GapCursor.valid($cur))\r\n                    return $cur;\r\n            }\r\n            // And then down into the next node\r\n            for (;;) {\r\n                let inside = dir > 0 ? next.firstChild : next.lastChild;\r\n                if (!inside) {\r\n                    if (next.isAtom && !next.isText && !NodeSelection.isSelectable(next)) {\r\n                        $pos = $pos.doc.resolve(pos + next.nodeSize * dir);\r\n                        mustMove = false;\r\n                        continue search;\r\n                    }\r\n                    break;\r\n                }\r\n                next = inside;\r\n                pos += dir;\r\n                let $cur = $pos.doc.resolve(pos);\r\n                if (GapCursor.valid($cur))\r\n                    return $cur;\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n}\r\nGapCursor.prototype.visible = false;\r\nGapCursor.findFrom = GapCursor.findGapCursorFrom;\r\nSelection.jsonID(\"gapcursor\", GapCursor);\r\nclass GapBookmark {\r\n    constructor(pos) {\r\n        this.pos = pos;\r\n    }\r\n    map(mapping) {\r\n        return new GapBookmark(mapping.map(this.pos));\r\n    }\r\n    resolve(doc) {\r\n        let $pos = doc.resolve(this.pos);\r\n        return GapCursor.valid($pos) ? new GapCursor($pos) : Selection.near($pos);\r\n    }\r\n}\r\nfunction closedBefore($pos) {\r\n    for (let d = $pos.depth; d >= 0; d--) {\r\n        let index = $pos.index(d), parent = $pos.node(d);\r\n        // At the start of this parent, look at next one\r\n        if (index == 0) {\r\n            if (parent.type.spec.isolating)\r\n                return true;\r\n            continue;\r\n        }\r\n        // See if the node before (or its first ancestor) is closed\r\n        for (let before = parent.child(index - 1);; before = before.lastChild) {\r\n            if ((before.childCount == 0 && !before.inlineContent) || before.isAtom || before.type.spec.isolating)\r\n                return true;\r\n            if (before.inlineContent)\r\n                return false;\r\n        }\r\n    }\r\n    // Hit start of document\r\n    return true;\r\n}\r\nfunction closedAfter($pos) {\r\n    for (let d = $pos.depth; d >= 0; d--) {\r\n        let index = $pos.indexAfter(d), parent = $pos.node(d);\r\n        if (index == parent.childCount) {\r\n            if (parent.type.spec.isolating)\r\n                return true;\r\n            continue;\r\n        }\r\n        for (let after = parent.child(index);; after = after.firstChild) {\r\n            if ((after.childCount == 0 && !after.inlineContent) || after.isAtom || after.type.spec.isolating)\r\n                return true;\r\n            if (after.inlineContent)\r\n                return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\nCreate a gap cursor plugin. When enabled, this will capture clicks\r\nnear and arrow-key-motion past places that don't have a normally\r\nselectable position nearby, and create a gap cursor selection for\r\nthem. The cursor is drawn as an element with class\r\n`ProseMirror-gapcursor`. You can either include\r\n`style/gapcursor.css` from the package's directory or add your own\r\nstyles to make it visible.\r\n*/\r\nfunction gapCursor() {\r\n    return new Plugin({\r\n        props: {\r\n            decorations: drawGapCursor,\r\n            createSelectionBetween(_view, $anchor, $head) {\r\n                return $anchor.pos == $head.pos && GapCursor.valid($head) ? new GapCursor($head) : null;\r\n            },\r\n            handleClick,\r\n            handleKeyDown,\r\n            handleDOMEvents: { beforeinput: beforeinput }\r\n        }\r\n    });\r\n}\r\nconst handleKeyDown = keydownHandler({\r\n    \"ArrowLeft\": arrow(\"horiz\", -1),\r\n    \"ArrowRight\": arrow(\"horiz\", 1),\r\n    \"ArrowUp\": arrow(\"vert\", -1),\r\n    \"ArrowDown\": arrow(\"vert\", 1)\r\n});\r\nfunction arrow(axis, dir) {\r\n    const dirStr = axis == \"vert\" ? (dir > 0 ? \"down\" : \"up\") : (dir > 0 ? \"right\" : \"left\");\r\n    return function (state, dispatch, view) {\r\n        let sel = state.selection;\r\n        let $start = dir > 0 ? sel.$to : sel.$from, mustMove = sel.empty;\r\n        if (sel instanceof TextSelection) {\r\n            if (!view.endOfTextblock(dirStr) || $start.depth == 0)\r\n                return false;\r\n            mustMove = false;\r\n            $start = state.doc.resolve(dir > 0 ? $start.after() : $start.before());\r\n        }\r\n        let $found = GapCursor.findGapCursorFrom($start, dir, mustMove);\r\n        if (!$found)\r\n            return false;\r\n        if (dispatch)\r\n            dispatch(state.tr.setSelection(new GapCursor($found)));\r\n        return true;\r\n    };\r\n}\r\nfunction handleClick(view, pos, event) {\r\n    if (!view || !view.editable)\r\n        return false;\r\n    let $pos = view.state.doc.resolve(pos);\r\n    if (!GapCursor.valid($pos))\r\n        return false;\r\n    let clickPos = view.posAtCoords({ left: event.clientX, top: event.clientY });\r\n    if (clickPos && clickPos.inside > -1 && NodeSelection.isSelectable(view.state.doc.nodeAt(clickPos.inside)))\r\n        return false;\r\n    view.dispatch(view.state.tr.setSelection(new GapCursor($pos)));\r\n    return true;\r\n}\r\n// This is a hack that, when a composition starts while a gap cursor\r\n// is active, quickly creates an inline context for the composition to\r\n// happen in, to avoid it being aborted by the DOM selection being\r\n// moved into a valid position.\r\nfunction beforeinput(view, event) {\r\n    if (event.inputType != \"insertCompositionText\" || !(view.state.selection instanceof GapCursor))\r\n        return false;\r\n    let { $from } = view.state.selection;\r\n    let insert = $from.parent.contentMatchAt($from.index()).findWrapping(view.state.schema.nodes.text);\r\n    if (!insert)\r\n        return false;\r\n    let frag = Fragment.empty;\r\n    for (let i = insert.length - 1; i >= 0; i--)\r\n        frag = Fragment.from(insert[i].createAndFill(null, frag));\r\n    let tr = view.state.tr.replace($from.pos, $from.pos, new Slice(frag, 0, 0));\r\n    tr.setSelection(TextSelection.near(tr.doc.resolve($from.pos + 1)));\r\n    view.dispatch(tr);\r\n    return false;\r\n}\r\nfunction drawGapCursor(state) {\r\n    if (!(state.selection instanceof GapCursor))\r\n        return null;\r\n    let node = document.createElement(\"div\");\r\n    node.className = \"ProseMirror-gapcursor\";\r\n    return DecorationSet.create(state.doc, [Decoration.widget(state.selection.head, node, { key: \"gapcursor\" })]);\r\n}\r\n\r\nexport { GapCursor, gapCursor };\r\n", "import type { Meta, MilkdownPlugin } from '@milkdown/ctx'\nimport { dropCursor } from '@milkdown/prose/dropcursor'\nimport { gapCursor } from '@milkdown/prose/gapcursor'\nimport { $ctx, $prose } from '@milkdown/utils'\n\nfunction withMeta<T extends MilkdownPlugin>(plugin: T, meta: Partial<Meta> & Pick<Meta, 'displayName'>): T {\n  Object.assign(plugin, {\n    meta: {\n      package: '@milkdown/plugin-cursor',\n      ...meta,\n    },\n  })\n\n  return plugin\n}\n\n/// @internal\nexport interface DropCursorOptions {\n  /**\n    The color of the cursor. Defaults to `black`.\n   */\n  color?: string | false\n  /**\n    The precise width of the cursor in pixels. Defaults to 1.\n   */\n  width?: number\n  /**\n    A CSS class name to add to the cursor element.\n   */\n  class?: string\n}\n\n/// A slice that contains [options for drop cursor](https://github.com/ProseMirror/prosemirror-dropcursor#documentation).\nexport const dropCursorConfig = $ctx<DropCursorOptions, 'dropCursorConfig'>({}, 'dropCursorConfig')\n\nwithMeta(dropCursorConfig, {\n  displayName: 'Ctx<dropCursor>',\n})\n\n/// This plugin wraps [drop cursor](https://github.com/ProseMirror/prosemirror-dropcursor).\nexport const dropCursorPlugin = $prose(ctx => dropCursor(ctx.get(dropCursorConfig.key)))\n\nwithMeta(dropCursorPlugin, {\n  displayName: 'Prose<dropCursor>',\n})\n\n/// This plugin wraps [gap cursor](https://github.com/ProseMirror/prosemirror-gapcursor).\nexport const gapCursorPlugin = $prose(() => gapCursor())\n\nwithMeta(gapCursorPlugin, {\n  displayName: 'Prose<gapCursor>',\n})\n\n/// All plugins exported by this package.\nexport const cursor: MilkdownPlugin[] = [dropCursorConfig, dropCursorPlugin, gapCursorPlugin]\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;AAaA,SAAS,WAAW,UAAU,CAAC,GAAG;AAC9B,SAAO,IAAI,OAAO;AAAA,IACd,KAAK,YAAY;AAAE,aAAO,IAAI,eAAe,YAAY,OAAO;AAAA,IAAG;AAAA,EACvE,CAAC;AACL;AACA,IAAM,iBAAN,MAAqB;AAAA,EACjB,YAAY,YAAY,SAAS;AAC7B,QAAI;AACJ,SAAK,aAAa;AAClB,SAAK,YAAY;AACjB,SAAK,UAAU;AACf,SAAK,UAAU;AACf,SAAK,SAAS,KAAK,QAAQ,WAAW,QAAQ,OAAO,SAAS,KAAK;AACnE,SAAK,QAAQ,QAAQ,UAAU,QAAQ,SAAa,QAAQ,SAAS;AACrE,SAAK,QAAQ,QAAQ;AACrB,SAAK,WAAW,CAAC,YAAY,WAAW,QAAQ,WAAW,EAAE,IAAI,UAAQ;AACrE,UAAI,UAAU,CAAC,MAAM;AAAE,aAAK,IAAI,EAAE,CAAC;AAAA,MAAG;AACtC,iBAAW,IAAI,iBAAiB,MAAM,OAAO;AAC7C,aAAO,EAAE,MAAM,QAAQ;AAAA,IAC3B,CAAC;AAAA,EACL;AAAA,EACA,UAAU;AACN,SAAK,SAAS,QAAQ,CAAC,EAAE,MAAM,QAAQ,MAAM,KAAK,WAAW,IAAI,oBAAoB,MAAM,OAAO,CAAC;AAAA,EACvG;AAAA,EACA,OAAO,YAAY,WAAW;AAC1B,QAAI,KAAK,aAAa,QAAQ,UAAU,OAAO,WAAW,MAAM,KAAK;AACjE,UAAI,KAAK,YAAY,WAAW,MAAM,IAAI,QAAQ;AAC9C,aAAK,UAAU,IAAI;AAAA;AAEnB,aAAK,cAAc;AAAA,IAC3B;AAAA,EACJ;AAAA,EACA,UAAU,KAAK;AACX,QAAI,OAAO,KAAK;AACZ;AACJ,SAAK,YAAY;AACjB,QAAI,OAAO,MAAM;AACb,WAAK,QAAQ,WAAW,YAAY,KAAK,OAAO;AAChD,WAAK,UAAU;AAAA,IACnB,OACK;AACD,WAAK,cAAc;AAAA,IACvB;AAAA,EACJ;AAAA,EACA,gBAAgB;AACZ,QAAI,OAAO,KAAK,WAAW,MAAM,IAAI,QAAQ,KAAK,SAAS;AAC3D,QAAI,UAAU,CAAC,KAAK,OAAO,eAAe;AAC1C,QAAI,SAAS;AACT,UAAI,SAAS,KAAK,YAAY,QAAQ,KAAK;AAC3C,UAAI,UAAU,OAAO;AACjB,YAAI,OAAO,KAAK,WAAW,QAAQ,KAAK,aAAa,SAAS,OAAO,WAAW,EAAE;AAClF,YAAI,MAAM;AACN,cAAI,WAAW,KAAK,sBAAsB;AAC1C,cAAI,MAAM,SAAS,SAAS,SAAS,SAAS;AAC9C,cAAI,UAAU;AACV,mBAAO,MAAM,KAAK,WAAW,QAAQ,KAAK,SAAS,EAAE,sBAAsB,EAAE,OAAO;AACxF,iBAAO,EAAE,MAAM,SAAS,MAAM,OAAO,SAAS,OAAO,KAAK,MAAM,KAAK,QAAQ,GAAG,QAAQ,MAAM,KAAK,QAAQ,EAAE;AAAA,QACjH;AAAA,MACJ;AAAA,IACJ;AACA,QAAI,CAAC,MAAM;AACP,UAAI,SAAS,KAAK,WAAW,YAAY,KAAK,SAAS;AACvD,aAAO,EAAE,MAAM,OAAO,OAAO,KAAK,QAAQ,GAAG,OAAO,OAAO,OAAO,KAAK,QAAQ,GAAG,KAAK,OAAO,KAAK,QAAQ,OAAO,OAAO;AAAA,IAC7H;AACA,QAAI,SAAS,KAAK,WAAW,IAAI;AACjC,QAAI,CAAC,KAAK,SAAS;AACf,WAAK,UAAU,OAAO,YAAY,SAAS,cAAc,KAAK,CAAC;AAC/D,UAAI,KAAK;AACL,aAAK,QAAQ,YAAY,KAAK;AAClC,WAAK,QAAQ,MAAM,UAAU;AAC7B,UAAI,KAAK,OAAO;AACZ,aAAK,QAAQ,MAAM,kBAAkB,KAAK;AAAA,MAC9C;AAAA,IACJ;AACA,SAAK,QAAQ,UAAU,OAAO,gCAAgC,OAAO;AACrE,SAAK,QAAQ,UAAU,OAAO,iCAAiC,CAAC,OAAO;AACvE,QAAI,YAAY;AAChB,QAAI,CAAC,UAAU,UAAU,SAAS,QAAQ,iBAAiB,MAAM,EAAE,YAAY,UAAU;AACrF,mBAAa,CAAC;AACd,kBAAY,CAAC;AAAA,IACjB,OACK;AACD,UAAIA,QAAO,OAAO,sBAAsB;AACxC,mBAAaA,MAAK,OAAO,OAAO;AAChC,kBAAYA,MAAK,MAAM,OAAO;AAAA,IAClC;AACA,SAAK,QAAQ,MAAM,OAAQ,KAAK,OAAO,aAAc;AACrD,SAAK,QAAQ,MAAM,MAAO,KAAK,MAAM,YAAa;AAClD,SAAK,QAAQ,MAAM,QAAS,KAAK,QAAQ,KAAK,OAAQ;AACtD,SAAK,QAAQ,MAAM,SAAU,KAAK,SAAS,KAAK,MAAO;AAAA,EAC3D;AAAA,EACA,gBAAgB,SAAS;AACrB,iBAAa,KAAK,OAAO;AACzB,SAAK,UAAU,WAAW,MAAM,KAAK,UAAU,IAAI,GAAG,OAAO;AAAA,EACjE;AAAA,EACA,SAAS,OAAO;AACZ,QAAI,CAAC,KAAK,WAAW;AACjB;AACJ,QAAI,MAAM,KAAK,WAAW,YAAY,EAAE,MAAM,MAAM,SAAS,KAAK,MAAM,QAAQ,CAAC;AACjF,QAAI,OAAO,OAAO,IAAI,UAAU,KAAK,KAAK,WAAW,MAAM,IAAI,OAAO,IAAI,MAAM;AAChF,QAAI,oBAAoB,QAAQ,KAAK,KAAK,KAAK;AAC/C,QAAI,WAAW,OAAO,qBAAqB,aAAa,kBAAkB,KAAK,YAAY,KAAK,KAAK,IAAI;AACzG,QAAI,OAAO,CAAC,UAAU;AAClB,UAAI,SAAS,IAAI;AACjB,UAAI,KAAK,WAAW,YAAY,KAAK,WAAW,SAAS,OAAO;AAC5D,YAAI,QAAQ,UAAU,KAAK,WAAW,MAAM,KAAK,QAAQ,KAAK,WAAW,SAAS,KAAK;AACvF,YAAI,SAAS;AACT,mBAAS;AAAA,MACjB;AACA,WAAK,UAAU,MAAM;AACrB,WAAK,gBAAgB,GAAI;AAAA,IAC7B;AAAA,EACJ;AAAA,EACA,UAAU;AACN,SAAK,gBAAgB,EAAE;AAAA,EAC3B;AAAA,EACA,OAAO;AACH,SAAK,gBAAgB,EAAE;AAAA,EAC3B;AAAA,EACA,UAAU,OAAO;AACb,QAAI,MAAM,UAAU,KAAK,WAAW,OAAO,CAAC,KAAK,WAAW,IAAI,SAAS,MAAM,aAAa;AACxF,WAAK,UAAU,IAAI;AAAA,EAC3B;AACJ;;;AC/HA,IAAM,YAAN,MAAM,mBAAkB,UAAU;AAAA;AAAA;AAAA;AAAA,EAI9B,YAAY,MAAM;AACd,UAAM,MAAM,IAAI;AAAA,EACpB;AAAA,EACA,IAAI,KAAK,SAAS;AACd,QAAI,OAAO,IAAI,QAAQ,QAAQ,IAAI,KAAK,IAAI,CAAC;AAC7C,WAAO,WAAU,MAAM,IAAI,IAAI,IAAI,WAAU,IAAI,IAAI,UAAU,KAAK,IAAI;AAAA,EAC5E;AAAA,EACA,UAAU;AAAE,WAAO,MAAM;AAAA,EAAO;AAAA,EAChC,GAAG,OAAO;AACN,WAAO,iBAAiB,cAAa,MAAM,QAAQ,KAAK;AAAA,EAC5D;AAAA,EACA,SAAS;AACL,WAAO,EAAE,MAAM,aAAa,KAAK,KAAK,KAAK;AAAA,EAC/C;AAAA;AAAA;AAAA;AAAA,EAIA,OAAO,SAAS,KAAK,MAAM;AACvB,QAAI,OAAO,KAAK,OAAO;AACnB,YAAM,IAAI,WAAW,sCAAsC;AAC/D,WAAO,IAAI,WAAU,IAAI,QAAQ,KAAK,GAAG,CAAC;AAAA,EAC9C;AAAA;AAAA;AAAA;AAAA,EAIA,cAAc;AAAE,WAAO,IAAI,YAAY,KAAK,MAAM;AAAA,EAAG;AAAA;AAAA;AAAA;AAAA,EAIrD,OAAO,MAAM,MAAM;AACf,QAAI,SAAS,KAAK;AAClB,QAAI,OAAO,eAAe,CAAC,aAAa,IAAI,KAAK,CAAC,YAAY,IAAI;AAC9D,aAAO;AACX,QAAI,WAAW,OAAO,KAAK,KAAK;AAChC,QAAI,YAAY;AACZ,aAAO;AACX,QAAI,QAAQ,OAAO,eAAe,KAAK,MAAM,CAAC,EAAE;AAChD,WAAO,SAAS,MAAM;AAAA,EAC1B;AAAA;AAAA;AAAA;AAAA,EAIA,OAAO,kBAAkB,MAAM,KAAK,WAAW,OAAO;AAClD,WAAQ,YAAS;AACb,UAAI,CAAC,YAAY,WAAU,MAAM,IAAI;AACjC,eAAO;AACX,UAAI,MAAM,KAAK,KAAK,OAAO;AAE3B,eAASC,KAAI,KAAK,SAAQA,MAAK;AAC3B,YAAI,SAAS,KAAK,KAAKA,EAAC;AACxB,YAAI,MAAM,IAAI,KAAK,WAAWA,EAAC,IAAI,OAAO,aAAa,KAAK,MAAMA,EAAC,IAAI,GAAG;AACtE,iBAAO,OAAO,MAAM,MAAM,IAAI,KAAK,WAAWA,EAAC,IAAI,KAAK,MAAMA,EAAC,IAAI,CAAC;AACpE;AAAA,QACJ,WACSA,MAAK,GAAG;AACb,iBAAO;AAAA,QACX;AACA,eAAO;AACP,YAAI,OAAO,KAAK,IAAI,QAAQ,GAAG;AAC/B,YAAI,WAAU,MAAM,IAAI;AACpB,iBAAO;AAAA,MACf;AAEA,iBAAS;AACL,YAAI,SAAS,MAAM,IAAI,KAAK,aAAa,KAAK;AAC9C,YAAI,CAAC,QAAQ;AACT,cAAI,KAAK,UAAU,CAAC,KAAK,UAAU,CAAC,cAAc,aAAa,IAAI,GAAG;AAClE,mBAAO,KAAK,IAAI,QAAQ,MAAM,KAAK,WAAW,GAAG;AACjD,uBAAW;AACX,qBAAS;AAAA,UACb;AACA;AAAA,QACJ;AACA,eAAO;AACP,eAAO;AACP,YAAI,OAAO,KAAK,IAAI,QAAQ,GAAG;AAC/B,YAAI,WAAU,MAAM,IAAI;AACpB,iBAAO;AAAA,MACf;AACA,aAAO;AAAA,IACX;AAAA,EACJ;AACJ;AACA,UAAU,UAAU,UAAU;AAC9B,UAAU,WAAW,UAAU;AAC/B,UAAU,OAAO,aAAa,SAAS;AACvC,IAAM,cAAN,MAAM,aAAY;AAAA,EACd,YAAY,KAAK;AACb,SAAK,MAAM;AAAA,EACf;AAAA,EACA,IAAI,SAAS;AACT,WAAO,IAAI,aAAY,QAAQ,IAAI,KAAK,GAAG,CAAC;AAAA,EAChD;AAAA,EACA,QAAQ,KAAK;AACT,QAAI,OAAO,IAAI,QAAQ,KAAK,GAAG;AAC/B,WAAO,UAAU,MAAM,IAAI,IAAI,IAAI,UAAU,IAAI,IAAI,UAAU,KAAK,IAAI;AAAA,EAC5E;AACJ;AACA,SAAS,aAAa,MAAM;AACxB,WAASA,KAAI,KAAK,OAAOA,MAAK,GAAGA,MAAK;AAClC,QAAI,QAAQ,KAAK,MAAMA,EAAC,GAAG,SAAS,KAAK,KAAKA,EAAC;AAE/C,QAAI,SAAS,GAAG;AACZ,UAAI,OAAO,KAAK,KAAK;AACjB,eAAO;AACX;AAAA,IACJ;AAEA,aAAS,SAAS,OAAO,MAAM,QAAQ,CAAC,KAAI,SAAS,OAAO,WAAW;AACnE,UAAK,OAAO,cAAc,KAAK,CAAC,OAAO,iBAAkB,OAAO,UAAU,OAAO,KAAK,KAAK;AACvF,eAAO;AACX,UAAI,OAAO;AACP,eAAO;AAAA,IACf;AAAA,EACJ;AAEA,SAAO;AACX;AACA,SAAS,YAAY,MAAM;AACvB,WAASA,KAAI,KAAK,OAAOA,MAAK,GAAGA,MAAK;AAClC,QAAI,QAAQ,KAAK,WAAWA,EAAC,GAAG,SAAS,KAAK,KAAKA,EAAC;AACpD,QAAI,SAAS,OAAO,YAAY;AAC5B,UAAI,OAAO,KAAK,KAAK;AACjB,eAAO;AACX;AAAA,IACJ;AACA,aAAS,QAAQ,OAAO,MAAM,KAAK,KAAI,QAAQ,MAAM,YAAY;AAC7D,UAAK,MAAM,cAAc,KAAK,CAAC,MAAM,iBAAkB,MAAM,UAAU,MAAM,KAAK,KAAK;AACnF,eAAO;AACX,UAAI,MAAM;AACN,eAAO;AAAA,IACf;AAAA,EACJ;AACA,SAAO;AACX;AAWA,SAAS,YAAY;AACjB,SAAO,IAAI,OAAO;AAAA,IACd,OAAO;AAAA,MACH,aAAa;AAAA,MACb,uBAAuB,OAAO,SAAS,OAAO;AAC1C,eAAO,QAAQ,OAAO,MAAM,OAAO,UAAU,MAAM,KAAK,IAAI,IAAI,UAAU,KAAK,IAAI;AAAA,MACvF;AAAA,MACA;AAAA,MACA;AAAA,MACA,iBAAiB,EAAE,YAAyB;AAAA,IAChD;AAAA,EACJ,CAAC;AACL;AACA,IAAM,gBAAgB,eAAe;AAAA,EACjC,aAAa,MAAM,SAAS,EAAE;AAAA,EAC9B,cAAc,MAAM,SAAS,CAAC;AAAA,EAC9B,WAAW,MAAM,QAAQ,EAAE;AAAA,EAC3B,aAAa,MAAM,QAAQ,CAAC;AAChC,CAAC;AACD,SAAS,MAAM,MAAM,KAAK;AACtB,QAAM,SAAS,QAAQ,SAAU,MAAM,IAAI,SAAS,OAAS,MAAM,IAAI,UAAU;AACjF,SAAO,SAAU,OAAO,UAAU,MAAM;AACpC,QAAI,MAAM,MAAM;AAChB,QAAI,SAAS,MAAM,IAAI,IAAI,MAAM,IAAI,OAAO,WAAW,IAAI;AAC3D,QAAI,eAAe,eAAe;AAC9B,UAAI,CAAC,KAAK,eAAe,MAAM,KAAK,OAAO,SAAS;AAChD,eAAO;AACX,iBAAW;AACX,eAAS,MAAM,IAAI,QAAQ,MAAM,IAAI,OAAO,MAAM,IAAI,OAAO,OAAO,CAAC;AAAA,IACzE;AACA,QAAI,SAAS,UAAU,kBAAkB,QAAQ,KAAK,QAAQ;AAC9D,QAAI,CAAC;AACD,aAAO;AACX,QAAI;AACA,eAAS,MAAM,GAAG,aAAa,IAAI,UAAU,MAAM,CAAC,CAAC;AACzD,WAAO;AAAA,EACX;AACJ;AACA,SAAS,YAAY,MAAM,KAAK,OAAO;AACnC,MAAI,CAAC,QAAQ,CAAC,KAAK;AACf,WAAO;AACX,MAAI,OAAO,KAAK,MAAM,IAAI,QAAQ,GAAG;AACrC,MAAI,CAAC,UAAU,MAAM,IAAI;AACrB,WAAO;AACX,MAAI,WAAW,KAAK,YAAY,EAAE,MAAM,MAAM,SAAS,KAAK,MAAM,QAAQ,CAAC;AAC3E,MAAI,YAAY,SAAS,SAAS,MAAM,cAAc,aAAa,KAAK,MAAM,IAAI,OAAO,SAAS,MAAM,CAAC;AACrG,WAAO;AACX,OAAK,SAAS,KAAK,MAAM,GAAG,aAAa,IAAI,UAAU,IAAI,CAAC,CAAC;AAC7D,SAAO;AACX;AAKA,SAAS,YAAY,MAAM,OAAO;AAC9B,MAAI,MAAM,aAAa,2BAA2B,EAAE,KAAK,MAAM,qBAAqB;AAChF,WAAO;AACX,MAAI,EAAE,MAAM,IAAI,KAAK,MAAM;AAC3B,MAAI,SAAS,MAAM,OAAO,eAAe,MAAM,MAAM,CAAC,EAAE,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI;AACjG,MAAI,CAAC;AACD,WAAO;AACX,MAAI,OAAO,SAAS;AACpB,WAAS,IAAI,OAAO,SAAS,GAAG,KAAK,GAAG;AACpC,WAAO,SAAS,KAAK,OAAO,CAAC,EAAE,cAAc,MAAM,IAAI,CAAC;AAC5D,MAAI,KAAK,KAAK,MAAM,GAAG,QAAQ,MAAM,KAAK,MAAM,KAAK,IAAI,MAAM,MAAM,GAAG,CAAC,CAAC;AAC1E,KAAG,aAAa,cAAc,KAAK,GAAG,IAAI,QAAQ,MAAM,MAAM,CAAC,CAAC,CAAC;AACjE,OAAK,SAAS,EAAE;AAChB,SAAO;AACX;AACA,SAAS,cAAc,OAAO;AAC1B,MAAI,EAAE,MAAM,qBAAqB;AAC7B,WAAO;AACX,MAAI,OAAO,SAAS,cAAc,KAAK;AACvC,OAAK,YAAY;AACjB,SAAO,cAAc,OAAO,MAAM,KAAK,CAAC,WAAW,OAAO,MAAM,UAAU,MAAM,MAAM,EAAE,KAAK,YAAY,CAAC,CAAC,CAAC;AAChH;;;ACpOA,SAASC,EAAmCC,GAAWC,GAAoD;AACzG,SAAA,OAAO,OAAOD,GAAQ;IACpB,MAAM;MACJ,SAAS;MACT,GAAGC;IACL;EAAA,CACD,GAEMD;AACT;AAmBO,IAAME,IAAmBC,EAA4C,CAAC,GAAG,kBAAkB;AAElGJ,EAASG,GAAkB;EACzB,aAAa;AACf,CAAC;AAGY,IAAAE,IAAmBC,GAAO,CAAOC,MAAAC,WAAWD,EAAI,IAAIJ,EAAiB,GAAG,CAAC,CAAC;AAEvFH,EAASK,GAAkB;EACzB,aAAa;AACf,CAAC;AAGM,IAAMI,IAAkBH,GAAO,MAAMI,UAAAA,CAAW;AAEvDV,EAASS,GAAiB;EACxB,aAAa;AACf,CAAC;AAGM,IAAME,IAA2B,CAACR,GAAkBE,GAAkBI,CAAe;",
  "names": ["rect", "d", "withMeta", "plugin", "meta", "dropCursorConfig", "$ctx", "dropCursorPlugin", "$prose", "ctx", "dropCursor", "gapCursorPlugin", "gapCursor", "cursor"]
}
